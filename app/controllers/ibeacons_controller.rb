class IbeaconsController < ApplicationController
	skip_before_filter  :verify_authenticity_token
	require './lib/algorithm.rb'
	require './lib/rep.rb'
    require './lib/rotate.rb'
	def index 
     #    beginning_time = Time.now
     #     p "========================"
	    # @info = Ibeacon.new 



        # Bad press1
        # @info.x_motion = "828.0,1375.0,625.0,859.0,1234.0,625.0,1062.0,968.0,500.0,1343.0,625.0,1109.0,984.0,796.0,1062.0,984.0,562.0,"
        # @info.y_motion = "-1000.0,203.0,281.0,171.0,734.0,562.0,421.0,421.0,171.0,921.0,390.0,359.0,484.0,140.0,500.0,-562.0,-781.0,"
        # @info.z_motion = "-234.0,187.0,109.0,78.0,46.0,-62.0,93.0,-62.0,-140.0,78.0,-15.0,265.0,0.0,-125.0,-31.0,-218.0,-296.0,"

        # #  Row 15
        # @info.x_motion = "1984.0,765.0,1843.0,1046.0,125.0,1281.0,-265.0,1984.0,1984.0,1984.0,1375.0,859.0,62.0,0.0,"
        # @info.y_motion = "1984.0,-78.0,734.0,-796.0,218.0,-296.0,93.0,171.0,78.0,437.0,281.0,-515.0,-156.0,-15.0,"
        # @info.z_motion = "1984.0,1687.0,1984.0,-1187.0,687.0,1078.0,437.0,1984.0,1984.0,937.0,906.0,1343.0,921.0,1031.0,"




        # Curl 5 
        # @info.x_motion = "703.0,1140.0,1171.0,593.0,781.0,1125.0,546.0,1031.0,921.0,1250.0,718.0,671.0,"
        # @info.y_motion = "515.0,-93.0,-93.0,453.0,343.0,-125.0,421.0,-31.0,328.0,93.0,-593.0,-718.0,"
        # @info.z_motion = "125.0,-171.0,-46.0,125.0,15.0,-156.0,109.0,-62.0,62.0,-218.0,-203.0,-281.0,"


        # Curl 9 
        # @info.x_motion = "234.0,1203.0,984.0,1078.0,1062.0,-93.0,1203.0,1062.0,640.0,1000.0,1000.0,625.0,1218.0,437.0,703.0,671.0,671.0,"
        # @info.y_motion = "625.0,-562.0,-31.0,-15.0,-625.0,703.0,-296.0,0.0,-46.0,-890.0,156.0,187.0,-500.0,250.0,-562.0,-625.0,-734.0,"
        # @info.z_motion = "171.0,-218.0,-125.0,-125.0,-250.0,328.0,-125.0,-78.0,78.0,-218.0,15.0,-31.0,-296.0,31.0,-234.0,-265.0,-281.0,"

        # Press 3
        # @info.x_motion = "640.0,296.0,937.0,546.0,375.0,421.0,593.0,671.0,"
        # @info.y_motion = "-515.0,546.0,1437.0,812.0,734.0,546.0,-656.0,-734.0,"
        # @info.z_motion = "-78.0,-46.0,234.0,-15.0,62.0,187.0,-218.0,-328.0,"

        # Curl 11
        # @info.x_motion = "890.0,765.0,562.0,359.0,484.0,468.0,359.0,687.0,531.0,593.0,296.0,734.0,625.0,437.0,718.0,328.0,375.0,296.0,312.0,515.0,"
        # @info.y_motion = "-859.0,-890.0,-437.0,-1328.0,500.0,-1265.0,796.0,-156.0,-1046.0,-1171.0,-1359.0,-1000.0,-1031.0,-1062.0,-640.0,-203.0,-1484.0,93.0,-984.0,-812.0,"
        # @info.z_motion = "-390.0,-46.0,-15.0,-187.0,171.0,-203.0,187.0,-78.0,-234.0,-250.0,-250.0,-218.0,-218.0,-203.0,-140.0,-93.0,-265.0,93.0,-234.0,-281.0,"

         
         # Row 5
        # @info.x_motion = "375.0,218.0,171.0,203.0,296.0,453.0,203.0,375.0,390.0,531.0,593.0,656.0,"
        # @info.y_motion = "-734.0,93.0,-1015.0,-1046.0,-968.0,-1062.0,-906.0,-1125.0,-1312.0,-656.0,-859.0,-734.0,"
        # @info.z_motion = "281.0,359.0,-78.0,31.0,93.0,-421.0,281.0,-156.0,-125.0,-156.0,-296.0,-281.0,"

         # Press 10
        # @info.x_motion = "312.0,62.0,125.0,375.0,46.0,406.0,265.0,218.0,250.0,312.0,93.0,515.0,156.0,312.0,343.0,281.0,234.0,500.0,906.0,609.0,"
        # @info.y_motion = "906.0,734.0,890.0,1640.0,578.0,1187.0,1234.0,937.0,1343.0,859.0,593.0,1421.0,765.0,843.0,1140.0,703.0,750.0,1203.0,-687.0,-656.0,"
        # @info.z_motion = "-140.0,-15.0,156.0,140.0,0.0,296.0,62.0,156.0,234.0,125.0,-31.0,46.0,0.0,62.0,156.0,171.0,93.0,125.0,-296.0,-328.0,"

        # Row/Curl
        # @info.x_motion = "250.0,-734.0,-437.0,-531.0,-1093.0,-296.0,-953.0,-437.0,-750.0,-687.0,-750.0,-156.0,343.0,15.0,"
        # @info.y_motion = "-718.0,-203.0,-218.0,-140.0,281.0,140.0,546.0,531.0,328.0,500.0,218.0,265.0,-421.0,-15.0,"
        # @info.z_motion = "1296.0,-1000.0,-796.0,-421.0,-781.0,-640.0,-703.0,-828.0,-531.0,-718.0,-515.0,-593.0,984.0,1031.0,"

        # Press
        # @info.x_motion = "406.0,453.0,421.0,312.0,968.0,234.0,203.0,187.0,140.0,828.0,656.0,"
        # @info.y_motion = "859.0,1562.0,1734.0,1203.0,1984.0,1125.0,562.0,890.0,546.0,-765.0,-718.0,"
        # @info.z_motion = "-31.0,-31.0,125.0,203.0,343.0,359.0,78.0,-31.0,250.0,-328.0,-296.0,"

         # 
        # @info.x_motion = ","
        # @info.y_motion = ","
        # @info.z_motion = ","

         # 
        # @info.x_motion = ","
        # @info.y_motion = ","
        # @info.z_motion = ","




 		# @info.exercise_name = @info.classify_exercise(@info.x_motion,@info.y_motion,@info.z_motion)
 		# @info.reps_counted = Rep.rep_predict(@info.x_motion,@info.y_motion,@info.z_motion)
 		# @info.save
        
	    @data = Ibeacon.all

        # end_time = Time.now
        # p "this took: " + (end_time - beginning_time).to_s + "  seconds!"
        # p "========================"
	end
	
	def new
	end
	
	def create
		@info = Ibeacon.new 
		@info.x_motion = beacon_params["x_motion"]
 		@info.y_motion = beacon_params["y_motion"]
 		@info.z_motion = beacon_params["z_motion"]
 		@info.exercise_name = @info.classify_exercise(beacon_params["x_motion"],beacon_params["y_motion"],beacon_params["z_motion"])
 		@info.reps_counted = Rep.rep_predict(beacon_params["x_motion"],beacon_params["y_motion"],beacon_params["z_motion"])
 		@info.save
		redirect_to ibeacons_path
	end
	
	
	private
	
	def beacon_params
		params.require(:ibeacon).permit(:x_motion, :y_motion, :z_motion)
	end 
end
