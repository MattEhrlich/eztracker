class IbeaconsController < ApplicationController
	skip_before_filter  :verify_authenticity_token
	require './lib/algorithm.rb'
	require './lib/rep.rb'
	def index 
		# @info = Ibeacon.new 
		# Curl (4)
		# @info.x_motion = "-78.0,-750.0,484.0,359.0,343.0,-15.0,"
  #       @info.y_motion = "-625.0,-140.0,-500.0,-234.0,-640.0,-15.0,"
  #       @info.z_motion = "1984.0,1687.0,-2000.0,1421.0,1406.0,1031.0,"
  
 		# Curl 10 ( a fast)
 		# @info.x_motion = "656.0,-15.0,281.0,812.0,140.0,125.0,687.0,578.0,265.0,-62.0,-187.0,218.0,0.0,0.0,"
   #      @info.y_motion = "-671.0,-500.0,-468.0,-781.0,-765.0,-640.0,-593.0,-578.0,-546.0,-468.0,-125.0,-312.0,0.0,0.0,"
   #      @info.z_motion = "390.0,-1703.0,-812.0,1546.0,1625.0,1562.0,1578.0,1234.0,1281.0,1046.0,-1437.0,578.0,1000.0,1015.0,"

 		# # Curl 14
 		# @info.x_motion = "500.0,328.0,-234.0,750.0,328.0,546.0,234.0,796.0,703.0,-78.0,640.0,-62.0,-62.0,640.0,31.0,640.0,328.0,78.0,890.0,-250.0,1156.0,687.0,46.0,609.0,281.0,-15.0,"
   #      @info.y_motion = "-687.0,-62.0,93.0,-656.0,-796.0,-750.0,46.0,-1015.0,-859.0,359.0,-515.0,-31.0,-203.0,-718.0,250.0,-531.0,-187.0,-218.0,-703.0,515.0,-1015.0,-671.0,296.0,-953.0,-562.0,-15.0,"
   #      @info.z_motion = "218.0,843.0,468.0,828.0,781.0,843.0,765.0,1078.0,1078.0,-437.0,796.0,968.0,546.0,1015.0,171.0,640.0,1203.0,171.0,1406.0,-171.0,1078.0,1140.0,437.0,1765.0,1156.0,1031.0,"

        # Curl 15 ( thought it was a row)
        # @info.x_motion = "1984.0,765.0,1843.0,1046.0,125.0,1281.0,-265.0,1984.0,1984.0,1984.0,1375.0,859.0,62.0,0.0,"
        # @info.y_motion = "1984.0,-78.0,734.0,-796.0,218.0,-296.0,93.0,171.0,78.0,437.0,281.0,-515.0,-156.0,-15.0,"
        # @info.z_motion = "1984.0,1687.0,1984.0,-1187.0,687.0,1078.0,437.0,1984.0,1984.0,937.0,906.0,1343.0,921.0,1031.0,"

        # Curl 11
        # @info.x_motion ="500.0,218.0,265.0,515.0,78.0,46.0,609.0,453.0,-203.0,390.0,296.0,-375.0,265.0,343.0,-484.0,-500.0,31.0,0.0,"
        # @info.y_motion ="-218.0,-359.0,-234.0,-78.0,-125.0,-46.0,-125.0,-328.0,-31.0,-406.0,-453.0,-140.0,-203.0,-250.0,-125.0,0.0,-515.0,0.0,"
        # @info.z_motion ="1296.0,1359.0,1265.0,1125.0,968.0,890.0,1453.0,1312.0,546.0,1421.0,1375.0,-31.0,1328.0,1593.0,-250.0,375.0,1015.0,1015.0,"

        # Curl 13
        # @info.x_motion ="703.0,390.0,-93.0,625.0,-78.0,-375.0,578.0,-437.0,-156.0,296.0,-62.0,359.0,546.0,-31.0,-203.0,390.0,-375.0,125.0,62.0,-343.0,296.0,0.0,"
        # @info.y_motion ="-453.0,-203.0,-218.0,-703.0,-421.0,15.0,-546.0,218.0,-234.0,-437.0,-31.0,-343.0,-343.0,46.0,-140.0,-328.0,-109.0,-437.0,-375.0,140.0,-296.0,-15.0,"
        # @info.z_motion ="1312.0,1281.0,812.0,1484.0,1218.0,312.0,1375.0,125.0,843.0,1250.0,484.0,1156.0,1375.0,1343.0,812.0,1187.0,484.0,1218.0,1156.0,15.0,875.0,1031.0,"
   

 		# @info.exercise_name = @info.classify_exercise(@info.x_motion,@info.y_motion,@info.z_motion)
 		# @info.reps_counted = Rep.rep_predict(@info.x_motion,@info.y_motion,@info.z_motion)
 		# @info.save
		@data = Ibeacon.all
	end
	
	def new
	end
	
	def create
		@info = Ibeacon.new 
		@info.x_motion = beacon_params["x_motion"]
 		@info.y_motion = beacon_params["y_motion"]
 		@info.z_motion = beacon_params["z_motion"]
 		@info.exercise_name = @info.classify_exercise(beacon_params["x_motion"],beacon_params["y_motion"],beacon_params["z_motion"])
 		@info.reps_counted = Rep.rep_predict(beacon_params["x_motion"],beacon_params["y_motion"],beacon_params["z_motion"])
 		@info.save
		redirect_to ibeacons_path
	end
	
	
	private
	
	def beacon_params
		params.require(:ibeacon).permit(:x_motion, :y_motion, :z_motion)
	end 
end
